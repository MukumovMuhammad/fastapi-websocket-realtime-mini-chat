<!DOCTYPE html>
<html>
<head>
    <title>FastAPI Chat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="/static/script.js"></script>
</head>

<body>

<div class="container mt-1">

    <h1 class="text-center">FastAPI WebSocket Chat</h1>

    <!-- SIGN IN / SIGN UP -->
    <div id="auth_div" class="mt-4">
        <form id="signin_form">
            <input type="text" class="form-control mt-2" id="username_inp" placeholder="Username">
            <input type="password" class="form-control mt-2" id="password_inp" placeholder="Password">
            <button class="btn btn-primary mt-3" onclick="signin(event)">Sign In</button>
            <button class="btn btn-success mt-3" onclick="signup(event)">Sign Up</button>
        </form>


    </div>

                <!-- CHAT ROOM -->
    <div id="chat_container" class="my-2 p-4 d-none ">
        <div>

            <button type="button" class="btn btn-primary" onclick="LogOut(event)" id="refreshButton">
                <i class="fas fa-sync-alt"></i> LogOut
            </button>
            <button type="button" class="btn btn-primary" onclick="get_all_users(event)" id="refreshButton">
                <i class="fas fa-sync-alt"></i> Refresh
            </button>
            
        </div>
        <div class="row" style="height: 85vh; border: 1px solid #ccc; border-radius: 8px; overflow: hidden;">

            <!-- LEFT SIDEBAR -->
            <div class="col-3 p-0 bg-light" style="border-right: 1px solid #ccc; overflow-y: auto;">
                
                <!-- YOUR PROFILE TOP BAR -->
                <div class="p-3 bg-primary text-white">
                    <strong id="current_username">Your Profile <span id="user_profile_name"></span></strong>
                    
                </div>
            

                <!-- USER LIST -->
                <ul id="user_list" class="list-group list-group-flush" style="height: 200px; overflow-y: auto;">
            
                    <!-- <li class="list-group-item user-item" onclick="openChat(12, 'John')">
                        John
                    </li> -->
                    
                </ul>

            </div>

            <!-- RIGHT CHAT ROOM -->
            <div class="col-9 d-flex flex-column p-0">

                <!-- TOP CHAT HEADER -->
                <div class="p-3 bg-white border-bottom d-flex flex-column">
                    <h5 id="active_chat_name" class="m-0"> <span id="selected_user_chat">Select a user </span></h5>
                    <hr>
                </div>
                

                <!-- MESSAGES AREA -->
                <div id="messages_container" class="flex-grow-1 p-3" 
                     style="height: 200px; overflow-y: auto;">
                    
                    <ul id="messages" class="list-unstyled"></ul>

                </div>

                <!-- MESSAGE INPUT -->
                <div class="p-3 bg-white border-top d-none" id="messageInput">
                    <form class="d-flex" onsubmit="sendMessage(event)">
                        <input type="text" id="messageText"
                            class="form-control"
                            placeholder="Message..."
                            autocomplete="off">
                        <button class="btn btn-primary ms-2">Send</button>
                    </form>
                </div>

            </div>
        </div>
    </div>


</div>




</body>
</html>
